<header class="app-header">
  <div class="header-content">
    <div class="logo-section">
      <svg class="angular-logo" viewBox="0 0 250 250" xmlns="http://www.w3.org/2000/svg">
        <polygon id="triangle" points="125,30 125,30 20,200 230,200" fill="#DD0031"/>
        <polygon id="triangle-outline" points="125,30 125,70 142,125 125,190 108,125 125,70" fill="#F2F2F2"/>
      </svg>
      <span class="header-title">ANGULAR</span>
    </div>
    <div class="search-bar">
      <input type="text" [(ngModel)]="searchTerm" placeholder="ğŸ” Buscar mascota..." class="search-input">
    </div>
  </div>
</header>

<div class="container">
  <div class="form-card">
    <div class="form-header">
      <h2>{{ mascotaEditando ? 'âœï¸ Editar Mascota' : 'â• Nueva Mascota' }}</h2>
    </div>
    
    <form (ngSubmit)="guardarMascota()" class="form">
      
      <div class="form-row">
        <div class="form-group">
          <label>Nombre</label>
          <div class="input-wrapper">
            <input type="text" [(ngModel)]="mascotaForm.nombre" name="nombre" placeholder="Ej: Luna" class="form-input" [class.invalid]="!isNombreValido()">
            <span class="error-icon" *ngIf="!isNombreValido()">âš ï¸</span>
          </div>
          <span class="error-message" *ngIf="!isNombreValido()">El nombre es obligatorio</span>
        </div>

        <div class="form-group">
          <label>Especie</label>
          <div class="input-wrapper">
            <input type="text" [(ngModel)]="mascotaForm.especie" name="especie" placeholder="Ej: Perro" class="form-input" [class.invalid]="!isEspecieValido()">
            <span class="error-icon" *ngIf="!isEspecieValido()">âš ï¸</span>
          </div>
          <span class="error-message" *ngIf="!isEspecieValido()">La especie es obligatoria</span>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Raza</label>
          <div class="input-wrapper">
            <input type="text" [(ngModel)]="mascotaForm.raza" name="raza" placeholder="Ej: Labrador" class="form-input" [class.invalid]="!isRazaValida()">
            <span class="error-icon" *ngIf="!isRazaValida()">âš ï¸</span>
          </div>
          <span class="error-message" *ngIf="!isRazaValida()">La raza es obligatoria</span>
        </div>

        <div class="form-group">
          <label>Edad ({{ edadMinima }} - {{ edadMaxima }} aÃ±os)</label>
          <div class="input-wrapper">
            <input type="number" [(ngModel)]="mascotaForm.edad" name="edad" min="0" max="50" class="form-input" [class.invalid]="!isEdadValida()">
            <span class="error-icon" *ngIf="!isEdadValida()">âš ï¸</span>
          </div>
          <span class="error-message" *ngIf="!isEdadValida()">La edad debe estar entre {{ edadMinima }} y {{ edadMaxima }} aÃ±os</span>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label>DueÃ±o</label>
          <div class="input-wrapper">
            <input type="text" [(ngModel)]="mascotaForm.dueno" name="dueno" placeholder="Ej: Juan PÃ©rez" class="form-input" [class.invalid]="!isDuenoValido()">
            <span class="error-icon" *ngIf="!isDuenoValido()">âš ï¸</span>
          </div>
          <span class="error-message" *ngIf="!isDuenoValido()">El nombre del dueÃ±o es obligatorio</span>
        </div>
      </div>

      <div class="button-group">
        <button type="submit" [disabled]="!esFormularioValido()" class="btn btn-primary">
          {{ mascotaEditando ? 'ğŸ’¾ Actualizar' : 'â• Guardar' }}
        </button>
        <button type="button" (click)="limpiarFormulario()" class="btn btn-secondary">
          ğŸ—‘ï¸ Limpiar
        </button>
        <button *ngIf="mascotaEditando" type="button" (click)="cancelarEdicion()" class="btn btn-cancel">
          âŒ Cancelar
        </button>
      </div>
    </form>
  </div>

  <div class="table-card">
    <div class="table-header">
      <h2>ğŸ“‹ Lista de Mascotas</h2>
      <span class="badge">{{ obtenerMascotasFiltradas().length }}</span>
    </div>
    
    <div *ngIf="obtenerMascotasFiltradas().length === 0" class="empty-state">
      <div class="empty-icon">ğŸ¾</div>
      <p>No hay mascotas registradas aÃºn</p>
    </div>

    <div *ngIf="obtenerMascotasFiltradas().length > 0" class="table-wrapper">
      <table class="data-table">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Especie</th>
            <th>Raza</th>
            <th>Edad</th>
            <th>DueÃ±o</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let mascota of obtenerMascotasFiltradas()" class="table-row">
            <td class="cell-nombre"><strong>{{ mascota.nombre }}</strong></td>
            <td>{{ mascota.especie }}</td>
            <td>{{ mascota.raza }}</td>
            <td class="cell-edad">{{ mascota.edad }} aÃ±os</td>
            <td>{{ mascota.dueno }}</td>
            <td class="cell-actions">
              <button (click)="editarMascota(mascota)" class="btn-action btn-edit" title="Editar">âœï¸</button>
              <button (click)="eliminarMascota(mascota._id)" class="btn-action btn-delete" title="Eliminar">ğŸ—‘ï¸</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>
