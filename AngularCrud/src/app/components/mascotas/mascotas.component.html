<header class="navbar">
  <div class="navbar-container">
    <div class="navbar-brand">
      <span class="brand-text">CRUD Mascotas ‚Ä¢ Andr√©s Fonseca - Luis Solano</span>
    </div>
    <div class="search-container">
      <input type="text" [(ngModel)]="searchTerm" placeholder="üîç Buscar..." class="search-input">
    </div>
  </div>
</header>

<main class="main-content">
  <div class="page-container">
  <div class="form-section">
      <div class="form-card">
        <div class="form-title-section">
          <h2 class="form-title">{{ mascotaEditando ? 'Editar' : 'Registrar' }}</h2>
          <p class="form-subtitle">{{ mascotaEditando ? 'Actualiza los datos' : 'Nueva mascota' }}</p>
        </div>

        <form class="form" (ngSubmit)="guardarMascota()">
          <div class="form-grid">
            <!-- Nombre -->
            <div class="form-field">
              <label class="field-label">
                <span>Nombre</span>
                <span class="required">*</span>
              </label>
              <div class="input-group">
                <span class="input-icon">üê∂</span>
                <input 
                  type="text" 
                  [(ngModel)]="mascotaForm.nombre" 
                  name="nombre" 
                  placeholder="Luna"
                  class="form-input"
                  [class.is-invalid]="!isNombreValido()">
              </div>
              <span class="error-text" *ngIf="!isNombreValido()">Requerido</span>
            </div>

            <!-- Especie -->
            <div class="form-field">
              <label class="field-label">
                <span>Especie</span>
                <span class="required">*</span>
              </label>
              <div class="input-group">
                <span class="input-icon">ü¶Å</span>
                <input 
                  type="text" 
                  [(ngModel)]="mascotaForm.especie" 
                  name="especie"
                  placeholder="Perro"
                  class="form-input"
                  [class.is-invalid]="!isEspecieValido()">
              </div>
              <span class="error-text" *ngIf="!isEspecieValido()">Requerido</span>
            </div>

            <!-- Raza -->
            <div class="form-field">
              <label class="field-label">
                <span>Raza</span>
                <span class="required">*</span>
              </label>
              <div class="input-group">
                <span class="input-icon">üìå</span>
                <input 
                  type="text" 
                  [(ngModel)]="mascotaForm.raza" 
                  name="raza"
                  placeholder="Labrador"
                  class="form-input"
                  [class.is-invalid]="!isRazaValida()">
              </div>
              <span class="error-text" *ngIf="!isRazaValida()">Requerido</span>
            </div>

            <!-- Edad -->
            <div class="form-field">
              <label class="field-label">
                <span>Edad</span>
                <span class="required">*</span>
                <span class="age-range">(0-50)</span>
              </label>
              <div class="input-group">
                <span class="input-icon">üìÖ</span>
                <input 
                  type="number" 
                  [(ngModel)]="mascotaForm.edad" 
                  name="edad"
                  min="0" 
                  max="50"
                  placeholder="5"
                  class="form-input"
                  [class.is-invalid]="!isEdadValida()">
              </div>
              <span class="error-text" *ngIf="!isEdadValida()">0-50 a√±os</span>
            </div>

            <!-- Due√±o -->
            <div class="form-field form-field-full">
              <label class="field-label">
                <span>Due√±o</span>
                <span class="required">*</span>
              </label>
              <div class="input-group">
                <span class="input-icon">üë§</span>
                <input 
                  type="text" 
                  [(ngModel)]="mascotaForm.dueno" 
                  name="dueno"
                  placeholder="Juan P√©rez"
                  class="form-input"
                  [class.is-invalid]="!isDuenoValido()">
              </div>
              <span class="error-text" *ngIf="!isDuenoValido()">Requerido</span>
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" [disabled]="!esFormularioValido()" class="btn btn-save">
              {{ mascotaEditando ? 'üíæ Actualizar' : '‚ûï Guardar' }}
            </button>
            <button type="button" (click)="limpiarFormulario()" class="btn btn-reset">
              Limpiar
            </button>
            <button *ngIf="mascotaEditando" type="button" (click)="cancelarEdicion()" class="btn btn-cancel">
              ‚ùå Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- TABLE SECTION -->
    <div class="table-section">
      <div class="table-card">
        <div class="table-title-section">
          <h2 class="table-title">Mis Mascotas</h2>
          <span class="pets-count">{{ obtenerMascotasFiltradas().length }}</span>
        </div>

        <!-- EMPTY STATE -->
        <div *ngIf="obtenerMascotasFiltradas().length === 0" class="empty-state">
          <div class="empty-icon">üêæ</div>
          <h3 class="empty-title">Sin mascotas</h3>
          <p class="empty-text">Agrega tu primera mascota</p>
        </div>

        <!-- TABLE -->
        <div *ngIf="obtenerMascotasFiltradas().length > 0" class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Especie</th>
                <th>Raza</th>
                <th>Edad</th>
                <th>Due√±o</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let mascota of obtenerMascotasFiltradas()" class="table-row">
                <td class="cell-name">{{ mascota.nombre }}</td>
                <td>{{ mascota.especie }}</td>
                <td>{{ mascota.raza }}</td>
                <td class="cell-age">{{ mascota.edad }} a√±os</td>
                <td>{{ mascota.dueno }}</td>
                <td class="cell-actions">
                  <button (click)="editarMascota(mascota)" class="action-btn edit-btn" title="Editar">
                    ‚úèÔ∏è
                  </button>
                  <button (click)="eliminarMascota(mascota._id)" class="action-btn delete-btn" title="Eliminar">
                    üóëÔ∏è
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
</main>